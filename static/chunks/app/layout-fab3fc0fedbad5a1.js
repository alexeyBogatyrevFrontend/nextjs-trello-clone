(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9519:function(e,t,a){Promise.resolve().then(a.t.bind(a,8877,23)),Promise.resolve().then(a.bind(a,3741))},2259:function(e,t,a){"use strict";a.d(t,{ID:function(){return s.ID},UA:function(){return i},tO:function(){return o}});var s=a(7332);let n=new s.KU;n.setEndpoint("https://cloud.appwrite.io/v1").setProject("651a938298d077a2ffed"),new s.mR(n);let i=new s.Lg(n),o=new s.Ke(n)},3741:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return components_Modal}});var s=a(7437),n=a(2265),i=a(6856),o=a(4587),l=a(3234),r=a(582),d=a(6981),c=a(3985);let u=[{id:"todo",name:"Todo",description:"A new task to be completed",color:"bg-red-500"},{id:"inprogress",name:"In Progress",description:"A task that is currently being worked on",color:"bg-yellow-500"},{id:"done",name:"Done",description:"A task that has been completed",color:"bg-green-500"}];var components_TaskTypeRadioGroup=()=>{let[e,t]=(0,r.Y)(e=>[e.newTaskType,e.setNewTaskType]);return(0,s.jsx)("div",{className:"w-full py-5",children:(0,s.jsx)("div",{className:"mx-auto w-full max-w-md",children:(0,s.jsx)(d.E,{value:e,onChange:e=>t(e),children:(0,s.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,s.jsx)(d.E.Option,{value:e.id,className:t=>{let{active:a,checked:s}=t;return"".concat(a?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-sky-300":"","\n									").concat(s?"".concat(e.color," bg-opacity-75 text-white"):"bg-white","\n									relative flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none\n									")},children:t=>{let{active:a,checked:n}=t;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.E.Label,{as:"p",className:"font-medium ".concat(n?"text-white":"text-gray-900"),children:e.name}),(0,s.jsx)(d.E.Description,{as:"span",className:"inline ".concat(n?"text-white":"to-gray-900"),children:(0,s.jsx)("span",{children:e.description})})]})}),n&&(0,s.jsx)("div",{className:"shrink-0 text-white",children:(0,s.jsx)(c.Z,{className:"h-6 w-6"})})]})})}},e.id))})})})})},m=a(6691),p=a.n(m),f=a(8803),components_Modal=()=>{let e=(0,n.useRef)(null),[t,a]=(0,l.a)(e=>[e.isOpen,e.closeModal]),[d,c,u,m,g,b]=(0,r.Y)(e=>[e.newTaskInput,e.setNewTaskInput,e.image,e.setImage,e.addTask,e.newTaskType]);return(0,s.jsx)(i.u,{appear:!0,show:t,as:n.Fragment,children:(0,s.jsxs)(o.V,{as:"form",onSubmit:e=>{e.preventDefault(),d&&(g(d,b,u),m(null),a())},className:"relative z-10",onClose:a,children:[(0,s.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(i.u.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(o.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,s.jsx)(o.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 pb-2",children:"Add a Task"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Enter a task here...",className:"w-full border border-gray-300 rounded-md outline-none p-5"})}),(0,s.jsx)(components_TaskTypeRadioGroup,{}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{var t;null===(t=e.current)||void 0===t||t.click()},className:"w-full border border-gray-300 rounded-md outline-none p-5 focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:[(0,s.jsx)(f.Z,{className:"h-6 w-6 mr-2 inline-block"}),"Upload Image"]}),u&&(0,s.jsx)(p(),{alt:"Uploaded Image",width:200,height:200,className:"w-full h-44 object-cover mt-2 filter hover:grayscale transition-all duration-150 cursor-not-allowed",src:URL.createObjectURL(u),onClick:()=>{m(null)}}),(0,s.jsx)("input",{type:"file",ref:e,hidden:!0,onChange:e=>{e.target.files[0].type.startsWith("image/")&&m(e.target.files[0])}})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:!d,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:bg-gray-100 disabled:text-gray-300 disabled:cursor-not-allowed",children:"Add Task"})})]})})})})]})})}},582:function(e,t,a){"use strict";a.d(t,{Y:function(){return i}});var s=a(2259);let getTodosGroupedByColumn=async()=>{let e=await s.UA.listDocuments("651a951c53cfe3fb41ce","651a9538bd918bd864f0"),t=e.documents,a=t.reduce((e,t)=>(e.get(t.status)||e.set(t.status,{id:t.status,todos:[]}),e.get(t.status).todos.push({$id:t.$id,$createdAt:t.$createdAt,title:t.title,status:t.status,...t.image&&{image:JSON.parse(t.image)}}),e),new Map),n=["todo","inprogress","done"];for(let e of n)a.get(e)||a.set(e,{id:e,todos:[]});let i=new Map(Array.from(a.entries()).sort((e,t)=>n.indexOf(e[0])-n.indexOf(t[0])));return{columns:i}},uploadImage=async e=>{if(!e)return;let t=await s.tO.createFile("651a965aa4c888a6b9dd",s.ID.unique(),e);return t};var n=a(4660);let i=(0,n.Ue)(e=>({board:{columns:new Map},searchString:"",setSearchString:t=>e({searchString:t}),getBoard:async()=>{let t=await getTodosGroupedByColumn();e({board:t})},newTaskInput:"",setNewTaskInput:t=>e({newTaskInput:t}),newTaskType:"todo",setNewTaskType:t=>e({newTaskType:t}),image:null,setImage:t=>e({image:t}),setBoardState:t=>e({board:t}),deleteTask:async(t,a,n)=>{var o;let l=new Map(i.getState().board.columns);null===(o=l.get(n))||void 0===o||o.todos.splice(t,1),e({board:{columns:l}}),a.image&&await s.tO.deleteFile(a.image.bucketId,a.image.fileId),await s.UA.deleteDocument("651a951c53cfe3fb41ce","651a9538bd918bd864f0",a.$id)},updateTodoInDb:async(e,t)=>{await s.UA.updateDocument("651a951c53cfe3fb41ce","651a9538bd918bd864f0",e.$id,{title:e.title,status:t})},addTask:async(t,a,n)=>{let i;if(n){let e=await uploadImage(n);e&&(i={bucketId:e.bucketId,fileId:e.$id})}let{$id:o}=await s.UA.createDocument("651a951c53cfe3fb41ce","651a9538bd918bd864f0",s.ID.unique(),{title:t,status:a,...i&&{image:JSON.stringify(i)}});e({newTaskInput:""}),e(e=>{let s=new Map(e.board.columns),n={$id:o,$createdAt:new Date().toISOString(),title:t,status:a,...i&&{image:i}},l=s.get(a);if(l){var r;null===(r=s.get(a))||void 0===r||r.todos.push(n)}else s.set(a,{id:a,todos:[n]});return{board:{columns:s}}})}}))},3234:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});var s=a(4660);let n=(0,s.Ue)()(e=>({isOpen:!1,openModal:()=>e({isOpen:!0}),closeModal:()=>e({isOpen:!1})}))},8877:function(){}},function(e){e.O(0,[175,783,971,864,744],function(){return e(e.s=9519)}),_N_E=e.O()}]);